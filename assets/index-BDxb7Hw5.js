var p=Object.defineProperty;var f=(e,t,r)=>t in e?p(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var u=(e,t,r)=>f(e,typeof t!="symbol"?t+"":t,r);var g=m((exports,module)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const h=class h{constructor(t,r,s,o){u(this,"pointer");u(this,"length");u(this,"_type");u(this,"_glue");u(this,"array");this.length=r,this._type=s,this._glue=o,this.pointer=t==0?o.malloc(r*h._types[this._type].BYTES_PER_ELEMENT):t,this.update(),this._glue.addBuffer(this)}update(){const t=this._glue.linearMemory,r=h._types[this._type];this.array=new r(t,this.pointer,this.length<0?Math.floor((t.byteLength-this.pointer)/r.BYTES_PER_ELEMENT):this.length)}free(){this._glue.free(this.pointer),this._glue.removeBuffer(this)}};u(h,"_types",[null,Uint8Array,Int8Array,Uint16Array,Int16Array,Uint32Array,Int32Array,BigUint64Array,BigInt64Array,Float32Array,Float64Array]);let LinearMemoryBuffer=h;var _SuperpoweredGlue;let SuperpoweredGlue$1=(_SuperpoweredGlue=class{constructor(){u(this,"id",Math.floor(Math.random()*Date.now()));u(this,"linearMemory");u(this,"wasmCode");u(this,"logMemory",!0);u(this,"_trackLoaderReceivers",new Map);u(this,"_nextTrackLoaderReceiverID",0);u(this,"_buffers",new Map);u(this,"_classUnderConstruction",null);u(this,"_functionsWithNamespace",new Map);u(this,"_exportsToWASM");u(this,"_memoryGrowArray");u(this,"_memoryGrowPointer");u(this,"_wasmInstance");u(this,"_trackLoaderSource");u(this,"_malloc");u(this,"_free");u(this,"_heapBase");u(this,"_stackSize");u(this,"_lastArrayLength");u(this,"_setInt64");u(this,"_view");u(this,"_littleEndian",new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68);const glue=this;this.Uint8Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,1,glue)}},this.Int8Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,2,glue)}},this.Uint16Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,3,glue)}},this.Int16Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,4,glue)}},this.Uint32Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,5,glue)}},this.Int32Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,6,glue)}},this.BigUint64Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,7,glue)}},this.BigInt64Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,8,glue)}},this.Float32Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,9,glue)}},this.Float64Buffer=class{constructor(e){return new LinearMemoryBuffer(0,e,10,glue)}},this._exportsToWASM={consolelog:(e,t)=>console.log(this.toString(e,t)),emscripten_notify_memory_growth:this._onMemoryGrowth.bind(this),__createClass__:this._createClass.bind(this),__createStaticProperty__:this._createStaticProperty.bind(this),__createStaticMethod__:this._createStaticMethod.bind(this),__createConstructor__:()=>{},__createDestructor__:()=>{},__createProperty__:this._createProperty.bind(this),__createMethod__:this._createMethod.bind(this),__createFunction__:this._createFunction.bind(this),__createClassConstant__:(e,t,r)=>this._classUnderConstruction[this.toString(e,t)]=r,__createConstant__:(e,t,r)=>this[this.toString(e,t)]=r,__runjs__:pointer=>eval(this.toString(pointer)),abs:Math.abs,round:Math.round,roundf:Math.fround,abort:()=>console.log("abort")},this.wasi={proc_exit:()=>console.log("abort")}}static async Instantiate(e,t=_SuperpoweredGlue.wasmCDNUrl,r=!1){_SuperpoweredGlue.wasmCDNUrl=t;const s=new _SuperpoweredGlue,o=await fetch(t).then(i=>i.arrayBuffer());return await s.loadFromArrayBuffer(r?_SuperpoweredGlue.getWASMWithSharedArrayBufferEnabled(o):o),s.Initialize(e),s}async loadFromArrayBuffer(e,t=null){this.wasmCode=e,await WebAssembly.instantiate(e,{wasi_snapshot_preview1:this.wasi,env:this._exportsToWASM}).then(r=>{this.setInstance(r.instance),t!=null&&t.afterWASMLoaded()})}async loadFromModule(e){await WebAssembly.instantiate(e,{wasi_snapshot_preview1:this.wasi,env:this._exportsToWASM}).then(t=>this.setInstance(t.instance))}async loadFromURL(e,t=!0){const r=await fetch(e).then(s=>s.arrayBuffer());t&&(this.wasmCode=r),await WebAssembly.instantiate(r,{wasi_snapshot_preview1:this.wasi,env:this._exportsToWASM}).then(s=>this.setInstance(s.instance))}static getWASMWithSharedArrayBufferEnabled(e){const t=new DataView(e),r=e.byteLength,s=new Uint8Array(e.byteLength);s.set(new Uint8Array(e));let o=8,i,n;for(;o<r;){const a=t.getUint8(o++);for(i=n=0;o<r;){const _=t.getUint8(o++);if(i|=(_&127)<<n,(_&128)==0)break;n+=7}if(a==5){s[o+1]=3;break}else o+=i}return s.buffer}setInstance(e){this._wasmInstance=e,this._wasmInstance.exports._initialize(),this._lastArrayLength=this._wasmInstance.exports.__lastarraylength__,this._malloc=this._wasmInstance.exports.__malloc__,this._stackSize=this._wasmInstance.exports.__stacksize__,this._heapBase=this._wasmInstance.exports.__heapbase__,this._free=this._wasmInstance.exports.__free__,this._setInt64=this._wasmInstance.exports.__setint64__,this.linearMemory=this._wasmInstance.exports.memory.buffer,this._view=new DataView(this.linearMemory),this._memoryGrowPointer=this._malloc(16),this._memoryGrowArray=new Uint8Array(this.linearMemory,this._memoryGrowPointer,16);const t=this._malloc(1024),r=new Uint8Array(this.linearMemory,this._malloc(1024),1024),s=this._wasmInstance.exports.__demangle__;for(const o in this._wasmInstance.exports)if(o!="__demangle__"){const i=s(this.toWASMString(o,r),t),n=this._wasmInstance.exports[o];if(i>0){let a=this.toString(t,i);const _=a.indexOf("(");_>0&&(a=a.substring(0,_));let l=a.lastIndexOf("::");l>0&&(l=a.lastIndexOf("::",l-1),l>0&&(a=a.substr(l+2)));const c=a.split("::",2);if(c.length==2){let d=this._functionsWithNamespace.get(c[0]);d||(d=new Map,this._functionsWithNamespace.set(c[0],d)),d.set(c[1],n)}this[a]=n}else this[o]=n}this._free(t),this._free(r.byteOffset),this._wasmInstance.exports.__initialize__();for(const[o,i]of this._functionsWithNamespace)i.clear();this._functionsWithNamespace.clear(),this._logMemory(),this._classUnderConstruction=null}returnPointerToView(e,t){if(t<1||e==null)return e;const r=this._lastArrayLength();return new LinearMemoryBuffer(e,r>0?r:-1,t,this)}_invokeFunction(e,t,r){if(arguments.length==4&&typeof arguments[3]=="object"){const a=arguments[3];let _=0;for(const l in a)arguments[_++]=a[l];arguments.length=_}const s=[],o=[],i=arguments.length;e!=0&&o.push(e);for(let a=3;a<i;a++)if(arguments[a].array!=null)o.push(arguments[a].array.byteOffset);else if(arguments[a].pointerToInstance!=null)o.push(arguments[a].pointerToInstance);else if(typeof arguments[a]=="string"){const _=this.toWASMString(arguments[a]);o.push(_),s.push(_)}else o.push(arguments[a]);const n=t.apply(t,o);for(const a of s)this.free(a);return this.returnPointerToView(n,r)}_createClass(e,t,r){const s=this.toString(e,t),o=this,i=class{constructor(){u(this,"className",s);u(this,"pointerToInstance");const n=o[s+"::"+s],a=[].slice.call(arguments);if(n==null)throw s+" has no constructor";a.unshift(o.malloc(r)),this.pointerToInstance=n.apply(null,a);const _=Object.getPrototypeOf(this).constructor.classInfo;for(const l of _.properties)o.createPropertyFromDescriptor(this,l);for(const l of _.methods)this[l.name]=o._invokeFunction.bind(o,this.pointerToInstance,l.function,l.returnPointerType)}destruct(){var n;(n=o[s+"::~"+s])==null||n.call(o,this.pointerToInstance),o.free(this.pointerToInstance),Object.getOwnPropertyNames(this).forEach(a=>delete this[a]),Object.setPrototypeOf(this,null)}};i.classInfo={name:s,properties:[],methods:[]},this._classUnderConstruction=this[s]=i,this._functionsWithNamespace.delete(s)}_read(e,t){switch(t){case 1:return this._view.getUint8(e);case 2:return this._view.getInt8(e);case 3:return this._view.getUint16(e,this._littleEndian);case 4:return this._view.getInt16(e,this._littleEndian);case 5:return this._view.getUint32(e,this._littleEndian);case 6:return this._view.getInt32(e,this._littleEndian);case 7:return this._view.getBigUint64(e,this._littleEndian);case 8:return this._view.getBigInt64(e,this._littleEndian);case 9:return this._view.getFloat32(e,this._littleEndian);case 10:return this._view.getFloat64(e,this._littleEndian)}}_write(e,t,r){switch(t){case 1:this._view.setUint8(e,r);break;case 2:this._view.setInt8(e,r);break;case 3:this._view.setUint16(e,r,this._littleEndian);break;case 4:this._view.setInt16(e,r,this._littleEndian);break;case 5:this._view.setUint32(e,r,this._littleEndian);break;case 6:this._view.setInt32(e,r,this._littleEndian);break;case 7:this._view.setBigUint64(e,r,this._littleEndian);break;case 8:this._view.setBigInt64(e,r,this._littleEndian);break;case 9:this._view.setFloat32(e,r,this._littleEndian);break;case 10:this._view.setFloat64(e,r,this._littleEndian);break}}_createProperty(e,t,r,s,o){this._classUnderConstruction.classInfo.properties.push({name:this.toString(e,t),offset:r,viewType:s,viewLength:o})}createPropertyFromDescriptor(e,t){const r=(e==null?void 0:e.pointerToInstance)??0;if(t.viewLength>1){const s=new LinearMemoryBuffer(r+t.offset,t.viewLength,t.viewType,this);Object.defineProperty(e,t.name,{get:function(){return s.array},configurable:!0,enumerable:!0})}else Object.defineProperty(e,t.name,{get:()=>this._read(r+t.offset,t.viewType),set:s=>{this._write(r+t.offset,t.viewType,s)},configurable:!0,enumerable:!0})}_createStaticProperty(e,t,r,s,o){this.createPropertyFromDescriptor(this._classUnderConstruction,{name:this.toString(e,t),offset:r,viewType:s,viewLength:o})}_createMethod(e,t,r){const s=this.toString(e,t);this._classUnderConstruction.classInfo.methods.push({name:s,function:this[this._classUnderConstruction.classInfo.name+"::"+s],returnPointerType:r})}_createStaticMethod(e,t,r){const s=this.toString(e,t),o=this._classUnderConstruction.classInfo.name+"::"+s;this._classUnderConstruction[s]=this._invokeFunction.bind(this,0,this[o],r)}_createFunction(e,t,r){const s=this.toString(e,t);if(!this[s]){for(const[o,i]of this._functionsWithNamespace){const n=i.get(s);if(n!=null){this[s]=n,i.delete(s);break}}if(!this[s])return}this[s]=this._invokeFunction.bind(this,0,this[s],r)}exportToWasm(e,t){this._exportsToWASM[e]=()=>{const r=t.apply(t,arguments);return r.array!=null?r.array.byteOffset:r}}_onMemoryGrowth(e){this.linearMemory=this._wasmInstance.exports.memory.buffer,this._view=new DataView(this.linearMemory),this._memoryGrowArray.buffer.byteLength<1&&this._updateMemoryViews(),this._logMemory()}toString(e,t=0){let r=null;if(t<1){const _=Math.min(16384,this.linearMemory.byteLength-e);for(r=new Uint8Array(this.linearMemory,e,_),t=0;t<_&&r[t]!=0;t++);}else r=new Uint8Array(this.linearMemory,e,t);let s="",o=0,i,n,a;for(;o<t;){if(a=r[o],a<=127?(i=0,n=a&255):a<=223?(i=1,n=a&31):a<=239?(i=2,n=a&15):a<=244?(i=3,n=a&7):i=n=0,t-o-i>0)for(let _=0;_<i;_++)n=n<<6|r[o+_+1]&63;else n=65533,i=t-o;s+=String.fromCodePoint(n),o+=i+1}return s}toWASMString(e,t){const r=e.length,s=r*4+1;let o=0,i,n,a=0,_;for(t==null&&(t=new Uint8Array(this.linearMemory,this.malloc(s),s));o<r;){for(_=e.codePointAt(o)??0,_<=127?(i=0,n=0):_<=2047?(i=6,n=192):_<=65535?(i=12,n=224):_<=2097151?(i=18,n=240):i=n=0,t[a++]=n|_>>i,i-=6;i>=0;)t[a++]=128|_>>i&63,i-=6;o+=_>=65536?2:1}return t[a]=0,t.byteOffset}_niceSize(e){if(e==0)return"0 byte";if(e==1)return"1 byte";const t=[" bytes"," kb"," mb"," gb"," tb"],r=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,r))+t[r]}_logMemory(){this.logMemory&&console.log("WASM memory "+this.id+": "+this._niceSize(this._stackSize())+" stack, "+this._niceSize(this.linearMemory.byteLength-this._heapBase())+" heap, "+this._niceSize(this.linearMemory.byteLength)+" total.")}malloc(e){const t=this._malloc(e);return this._memoryGrowArray.buffer.byteLength<1&&this._updateMemoryViews(),t}_updateMemoryViews(){for(const[e,t]of this._buffers)for(const r of t)r.update();this._memoryGrowArray=new Uint8Array(this.linearMemory,this._memoryGrowPointer,16)}addBuffer(e){const t=this._buffers.get(e.pointer);t?t.add(e):this._buffers.set(e.pointer,new Set([e]))}removeBuffer(e){const t=this._buffers.get(e.pointer);if(t)t.delete(e);else return;t.size<1&&this._buffers.delete(e.pointer)}free(e){const t=this._buffers.get(e);t&&(t.clear(),this._buffers.delete(e)),this._free(e)}setInt64(e,t,r){this._setInt64(e,t,r)}bufferToWASM(e,t,r){let s=null,o=null;r===void 0&&(r=0),typeof t.getChannelData=="function"?(s=t.getChannelData(0),o=t.getChannelData(1)):(s=t[r][0],o=t[r][1]);const i=e.constructor===Array?e[r].array:e.array,n=i.length;for(let a=0,_=0;a<n;a++,_++)i[a++]=s[_],i[a]=o[_]}bufferToJS(e,t,r){let s=null,o=null;r===void 0&&(r=0),typeof t.getChannelData=="function"?(s=t.getChannelData(0),o=t.getChannelData(1)):(s=t[r][0],o=t[r][1]);const i=e.constructor===Array?e[r].array:e.array,n=i.length;for(let a=0,_=0;a<n;a++,_++)s[_]=i[a++],o[_]=i[a]}arrayBufferToWASM(e,t=0){const r=this.malloc(e.byteLength+t);return new Uint8Array(this.linearMemory).set(new Uint8Array(e,0,e.byteLength),r+t),r}copyWASMToArrayBuffer(e,t){const r=new ArrayBuffer(t);return new Uint8Array(r,0,t).set(new Uint8Array(this.linearMemory,e,t)),r}moveWASMToArrayBuffer(e,t){const r=this.copyWASMToArrayBuffer(e,t);return this.free(e),r}static async loaderWorkerMain(e){_SuperpoweredGlue.__uint_max__sp__=255;const t=await _SuperpoweredGlue.Instantiate("");await fetch(e).then(r=>r.arrayBuffer()).then(r=>{const s=t.arrayBufferToWASM(r),o=t.Decoder.decodeToAudioInMemory(s,r.byteLength),i=t.moveWASMToArrayBuffer(o,48+t.AudioInMemory.getSize(o)*4);postMessage({__transfer__:i},[i])})}static loaderWorkerOnmessage(e){typeof e.data.load=="string"&&_SuperpoweredGlue.loaderWorkerMain(e.data.load)}registerTrackLoader(e){return typeof e.terminate<"u"&&e.addEventListener("message",this.handleTrackLoaderMessage),this._trackLoaderReceivers.set(this._nextTrackLoaderReceiverID++,typeof e.port<"u"?e.port:e),this._nextTrackLoaderReceiverID-1}removeTrackLoader(e){this._trackLoaderReceivers.delete(e)}nextTrackLoaderID(){return this._nextTrackLoaderReceiverID}handleTrackLoaderMessage(e){return typeof e.data.SuperpoweredLoad!="string"?!1:(this.loadTrackInWorker(e.data.SuperpoweredLoad,e.data.trackLoaderID),!0)}async loadTrackInWorker(e,t){this._trackLoaderSource==null&&(this._trackLoaderSource=URL.createObjectURL(new Blob([_SuperpoweredGlue.toString()+`\r
\r
onmessage = SuperpoweredGlue.loaderWorkerOnmessage;\r
\r
SuperpoweredGlue.wasmCDNUrl = "${_SuperpoweredGlue.wasmCDNUrl}";`],{type:"application/javascript"})));const r=new Worker(this._trackLoaderSource);r.__url__=e,r.trackLoaderID=t,r.onmessage=s=>this.transferLoadedTrack(s.data.__transfer__,r),typeof window<"u"&&typeof window.location<"u"&&typeof window.location.origin<"u"&&(e=new URL(e,window.location.origin).toString()),r.postMessage({load:e})}transferLoadedTrack(e,t){const r=this._trackLoaderReceivers.get(t.trackLoaderID);r!=null&&(typeof r.postMessage=="function"?r.postMessage({SuperpoweredLoaded:{buffer:e,url:t.__url__}},[e]):r({SuperpoweredLoaded:{buffer:e,url:t.__url__}}),t.terminate())}downloadAndDecode(e,t){t.trackLoaderID!==void 0&&(typeof t.onMessageFromMainScope=="function"&&typeof t.sendMessageToMainScope=="function"?t.sendMessageToMainScope({SuperpoweredLoad:e,trackLoaderID:t.trackLoaderID}):this.loadTrackInWorker(e,t.trackLoaderID))}},u(_SuperpoweredGlue,"wasmCDNUrl","https://cdn.jsdelivr.net/npm/@superpoweredsdk/web@2.7.4/dist/superpowered-npm.wasm"),_SuperpoweredGlue),SuperpoweredWebAudio$1=class{constructor(t,r){u(this,"Superpowered");u(this,"audioContext");this.Superpowered=r,this.audioContext=new AudioContext,this.audioContext.sampleRate<t&&(this.audioContext.close(),this.audioContext=new AudioContext({sampleRate:t}))}getUserMediaForAudio(t,r,s){const o={};if(navigator.mediaDevices){const i=navigator.mediaDevices.getSupportedConstraints();for(const n in i)t[n]!==void 0&&(o[n]=t[n])}o.audio=!0,o.video=!1,t.fastAndTransparentAudio===!0&&(o.echoCancellation=!1,o.disableLocalEcho=!1,o.autoGainControl=!1,o.audio={mandatory:{googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googEchoCancellation2:!1,googNoiseSuppression2:!1,googDAEchoCancellation:!1,googNoiseReduction:!1}});try{navigator.mediaDevices.getUserMedia(o).then(r).catch(s)}catch(i){s(location.protocol.toLowerCase()!="https"&&location.hostname.toLowerCase()!="localhost"?"Web Audio requires a secure context (HTTPS or localhost).":i)}}async getUserMediaForAudioAsync(t){return new Promise((r,s)=>this.getUserMediaForAudio(t,o=>{if(t.fastAndTransparentAudio===!0){const i=o.getAudioTracks();for(const n of i)n.applyConstraints({autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1})}r(o)},s))}async createAudioNodeAsync(t,r,s,o=1,i=1){return new Promise((n,a)=>this.createAudioNode(t,r,n,s,o,i))}createAudioNode(t,r,s,o,i=1,n=1){typeof AudioWorkletNode=="function"&&this.audioContext.audioWorklet.addModule(t).then(()=>{const a=this.Superpowered.nextTrackLoaderID(),_=new AudioWorkletNode(this.audioContext,r,{processorOptions:{wasmCode:this.Superpowered.wasmCode,samplerate:this.audioContext.sampleRate,maxChannels:this.Superpowered.__maxChannels__,numberOfInputs:i,numberOfOutputs:n,trackLoaderID:a},numberOfInputs:i,numberOfOutputs:n,outputChannelCount:Array(n).fill(2)});this.Superpowered.registerTrackLoader(_),_.superpoweredWASMUrl=SuperpoweredGlue$1.wasmCDNUrl,_.destruct=()=>{this.Superpowered.removeTrackLoader(a),_.port.postMessage("___superpowered___destruct___")},_.sendMessageToAudioScope=(l,c=[])=>_.port.postMessage(l,c),_.port.onmessage=l=>{this.Superpowered.handleTrackLoaderMessage(l)||(l.data=="___superpowered___onready___"?(_.state=1,_.trackLoaderID=a,s(_)):o(l.data))}})}};if(typeof AudioWorkletProcessor=="function"){class e extends AudioWorkletProcessor{constructor(s){super();u(this,"inputBuffers",[]);u(this,"outputBuffers",[]);SuperpoweredGlue$1.__uint_max__sp__=s.processorOptions.maxChannels,this.trackLoaderID=s.processorOptions.trackLoaderID,this.state=0,this.port.onmessage=o=>{o.data=="___superpowered___destruct___"?(this.state=-1,this.onDestruct()):this.onMessageFromMainScope(o.data)},this.samplerate=s.processorOptions.samplerate,this.Superpowered=new SuperpoweredGlue$1,this.Superpowered.loadFromArrayBuffer(s.processorOptions.wasmCode,this),this.numberOfInputs=s.processorOptions.numberOfInputs,this.numberOfOutputs=s.processorOptions.numberOfOutputs}afterWASMLoaded(){SuperpoweredGlue$1.wasmCDNUrl=this.superpoweredWASMUrl??void 0,this.Superpowered.Initialize();for(let s=this.numberOfInputs;s>0;s--)this.inputBuffers.push(new this.Superpowered.Float32Buffer(128*2));for(let s=this.numberOfOutputs;s>0;s--)this.outputBuffers.push(new this.Superpowered.Float32Buffer(128*2));this.onReady(),this.port.postMessage("___superpowered___onready___"),this.state=1}onReady(){}onDestruct(){}onMessageFromMainScope(s){}sendMessageToMainScope(s){this.port.postMessage(s)}processAudio(s,o,i,n){}process(s,o,i){if(this.state<0)return!1;if(this.state==1){for(let n=this.numberOfInputs-1;n>=0;n--)s[n].length>1?this.Superpowered.bufferToWASM(this.inputBuffers,s,n):this.Superpowered.memorySet(this.inputBuffers[n].pointer,0,128*8);this.processAudio(this.numberOfInputs==1?this.inputBuffers[0]:this.inputBuffers,this.numberOfOutputs==1?this.outputBuffers[0]:this.outputBuffers,128,i);for(let n=this.numberOfOutputs-1;n>=0;n--)o[n].length>1&&this.Superpowered.bufferToJS(this.outputBuffers,o,n)}return!0}}SuperpoweredWebAudio$1.AudioWorkletProcessor=e}class SuperpoweredGlue{niceSize(e){if(e==0)return"0 byte";if(e==1)return"1 byte";const t=[" bytes"," kb"," mb"," gb"," tb"];let r=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,r),2)+t[r]}createFloatArray(e){return this.createViewFromType(9,this.malloc(e*4),e)}static async fetch(e){let t=new SuperpoweredGlue;return await fetch(e).then(r=>r.arrayBuffer()).then(r=>t.loadFromArrayBuffer(r)),t}constructor(){this.id=Math.floor(Math.random()*Date.now()),this.linearMemory=null,this.__lastObject__=null,this.__classUnderConstruction__=null,this.__functions__={},this.__classes__={},this.__exportsToWasm__={},this.__views__=new Set;let glue=this;this.Uint8Buffer=class{constructor(e){return glue.createViewFromType(1,glue.malloc(e),e)}},this.Int8Buffer=class{constructor(e){return glue.createViewFromType(2,glue.malloc(e),e)}},this.Uint16Buffer=class{constructor(e){return glue.createViewFromType(3,glue.malloc(e*2),e)}},this.Int16Buffer=class{constructor(e){return glue.createViewFromType(4,glue.malloc(e*2),e)}},this.Uint32Buffer=class{constructor(e){return glue.createViewFromType(5,glue.malloc(e*4),e)}},this.Int32Buffer=class{constructor(e){return glue.createViewFromType(6,glue.malloc(e*4),e)}},this.BigUint64Buffer=class{constructor(e){return glue.createViewFromType(7,glue.malloc(e*8),e)}},this.BigInt64Buffer=class{constructor(e){return glue.createViewFromType(8,glue.malloc(e*8),e)}},this.Float32Buffer=class{constructor(e){return glue.createViewFromType(9,glue.malloc(e*4),e)}},this.Float64Buffer=class{constructor(e){return glue.createViewFromType(10,glue.malloc(e*8),e)}},this.__exportsToWasm__.consolelog=this.consolelog.bind(this),this.__exportsToWasm__.emscripten_notify_memory_growth=this.onMemoryGrowth.bind(this),this.__exportsToWasm__.__createClass__=this.createClass.bind(this),this.__exportsToWasm__.__createStaticProperty__=this.createStaticProperty.bind(this),this.__exportsToWasm__.__createStaticMethod__=this.createStaticMethod.bind(this),this.__exportsToWasm__.__createConstructor__=this.createConstructor.bind(this),this.__exportsToWasm__.__createDestructor__=this.createDestructor.bind(this),this.__exportsToWasm__.__createProperty__=this.createProperty.bind(this),this.__exportsToWasm__.__createMethod__=this.createMethod.bind(this),this.__exportsToWasm__.__createFunction__=this.createFunction.bind(this),this.__exportsToWasm__.__createClassConstant__=this.createClassConstant.bind(this),this.__exportsToWasm__.__createConstant__=this.createConstant.bind(this),this.__exportsToWasm__.__runjs__=(function(pointer){return eval(this.toString(pointer))}).bind(this),this.__exportsToWasm__.abs=function(e){return Math.abs(e)},this.__exportsToWasm__.round=function(e){return Math.round(e)},this.__exportsToWasm__.roundf=function(e){return Math.fround(e)},this.wasi={proc_exit:function(){console.log("abort")}}}updateBuffer(e,t){switch(e.__arraybuffer__=t,e.__type__){case 1:e.array=new Uint8Array(e.__arraybuffer__,e.pointer,e.length<0?e.__arraybuffer__.byteLength-e.pointer:e.length);break;case 2:e.array=new Int8Array(e.__arraybuffer__,e.pointer,e.length<0?e.__arraybuffer__.byteLength-e.pointer:e.length);break;case 3:e.array=new Uint16Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/2:e.length);break;case 4:e.array=new Int16Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/2:e.length);break;case 5:e.array=new Uint32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 6:e.array=new Int32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 7:e.array=new BigUint64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length);break;case 8:e.array=new BigInt64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length);break;case 9:e.array=new Float32Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/4:e.length);break;case 10:e.array=new Float64Array(e.__arraybuffer__,e.pointer,e.length<0?(e.__arraybuffer__.byteLength-e.pointer)/8:e.length);break}}createViewFromType(e,t,r){let s={pointer:t,length:r,__arraybuffer__:this.linearMemory,__type__:e,__glue__:this,free(){this.__glue__.free(this.pointer);let o=this;Object.getOwnPropertyNames(o).forEach(function(i){delete o[i]}),Object.setPrototypeOf(o,null)}};return this.updateBuffer(s,this.linearMemory),this.__views__.add(s),s}returnPointerToView(e,t){if(t>0&&typeof e!==void 0){let r=this.__functions__.__lastarraylength__();e=this.createViewFromType(t,e,r>0?r:-1)}return e}invokeMethod(){if(arguments.length==2&&typeof arguments[1]=="object"){let s=arguments[1],o=1;for(let i in s)arguments[o++]=s[i];arguments.length=o}let e=[];for(let s=arguments.length-1;s>0;s--)arguments[s].array!=null?arguments[s]=arguments[s].array.byteOffset:arguments[s].__pointer__!=null?arguments[s]=arguments[s].__pointer__:typeof arguments[s]=="string"&&(arguments[s]=this.__glue__.toWASMString(arguments[s]),e.push(arguments[s]));let t=arguments[0];arguments[0]=this.__pointer__;let r=t.function.apply(this,arguments);for(let s of e)this.__glue__.free(s);return r=this.__glue__.returnPointerToView(r,t.returnPointerType),r}invokeFunction(){if(arguments.length==1&&typeof arguments[0]=="object"){let r=arguments[0],s=0;for(let o in r)arguments[s++]=r[o];arguments.length=s}let e=[];for(let r=arguments.length-1;r>=0;r--)arguments[r].array!=null?arguments[r]=arguments[r].array.byteOffset:arguments[r].__pointer__!=null?arguments[r]=arguments[r].__pointer__:typeof arguments[r]=="string"&&(arguments[r]=this.glue.toWASMString(arguments[r]),e.push(arguments[r]));let t=this.apply(this,arguments);for(let r of e)this.glue.free(r);return t=this.glue.returnPointerToView(t,this.returnPointerType),t}invokeExportedFunction(){let e=this.apply(this,arguments);return typeof e.array!==void 0&&(e=e.array.byteOffset),e}createClass(e,t,r){let s=this,o=s.toString(e,t),i=class{constructor(){let n=Object.getPrototypeOf(this).constructor.__meta__;if(!n.hasConstructor)throw n.name+" has no constructor";this.__class__=n.name,this.__prev__=s.__lastObject__,s.__lastObject__!=null&&(s.__lastObject__.__next__=this),this.__next__=null,this.__glue__=s,s.__lastObject__=this;let a=[].slice.call(arguments);a.unshift(s.malloc(n.size)),this.__pointer__=s[n.name+"::"+n.name].apply(null,a);for(let _ of n.properties)s.createPropertyFromDescriptor(this,_);for(let _ of n.methods)this[_.name]=s.invokeMethod.bind(this,{function:s[_.wasmFunction],returnPointerType:_.returnPointerType})}destruct(){let n=Object.getPrototypeOf(this).constructor.__meta__;n.hasDestructor&&s[n.name+"::~"+n.name](this.__pointer__),s.free(this.__pointer__),this.__prev__!=null&&(this.__prev__.__next__=this.__next__),this.__next__!=null&&(this.__next__.__prev__=this.__prev__);let a=this;Object.getOwnPropertyNames(a).forEach(function(_){delete a[_]}),Object.setPrototypeOf(a,null)}};s.__classUnderConstruction__=s.__classes__[o]=s[o]=i,s.__classUnderConstruction__.__meta__={name:o,size:r,hasConstructor:!1,hasDestructor:!1,properties:[],methods:[],staticProperties:[]},delete s.__functionsWithNamespace__[o]}createConstructor(){this.__classUnderConstruction__.__meta__.hasConstructor=!0}createDestructor(){this.__classUnderConstruction__.__meta__.hasDestructor=this.__classUnderConstruction__.__meta__.hasConstructor}createClassConstant(e,t,r){let s=this.toString(e,t);this.__classUnderConstruction__[s]=r}createConstant(e,t,r){let s=this.toString(e,t);this[s]=r}createPropertyFromDescriptor(e,t){let r=this.createViewFromType(t.viewType,e.__pointer__+t.offset,t.viewLength);t.viewLength>1?Object.defineProperty(e,t.name,{get:function(){return r.array},set:function(s){r.array[index]=s},configurable:!0,enumerable:!0}):Object.defineProperty(e,t.name,{get:function(){return r.array[0]},set:function(s){r.array[0]=s},configurable:!0,enumerable:!0})}createProperty(e,t,r,s,o){let n={name:this.toString(e,t),offset:r,viewType:s,viewLength:o};this.__classUnderConstruction__.__meta__.properties.push(n)}createStaticPropertyFromDescriptor(e,t){let r=this.createViewFromType(t.viewType,t.pointer,t.viewLength);t.viewLength>1?Object.defineProperty(e,t.name,{get:function(){return r.array},set:function(s){r.array[index]=s},configurable:!0,enumerable:!0}):Object.defineProperty(e,t.name,{get:function(){return r.array[0]},set:function(s){r.array[0]=s},configurable:!0,enumerable:!0})}createStaticProperty(e,t,r,s,o){let n={name:this.toString(e,t),pointer:r,viewType:s,viewLength:o};this.__classUnderConstruction__.__meta__.staticProperties.push(n),this.createStaticPropertyFromDescriptor(this.__classUnderConstruction__,n)}createMethod(e,t,r){let s=this.toString(e,t),o=this.__classUnderConstruction__.__meta__.name+"::"+s;this.__classUnderConstruction__.__meta__.methods.push({name:s,wasmFunction:o,returnPointerType:r})}createStaticMethod(e,t,r){let s=this.toString(e,t),o=this.__classUnderConstruction__.__meta__.name+"::"+s;this[o].returnPointerType=r,this[o].glue=this,this.__classUnderConstruction__[s]=this.invokeFunction.bind(this[o])}createFunction(e,t,r){let s=this.toString(e,t);if(!this[s]){for(let o in this.__functionsWithNamespace__)if(this.__functionsWithNamespace__[o][s]){this[s]=this.__functionsWithNamespace__[o][s],delete this.__functionsWithNamespace__[o][s];break}if(!this[s])return}this[s].returnPointerType=r,this[s].glue=this,this[s]=this.invokeFunction.bind(this[s])}exportToWasm(e,t){this.__exportsToWasm__[e]=this.invokeExportedFunction.bind(t)}onMemoryGrowth(e){this.linearMemory=this.wasmInstance.exports.memory.buffer,this.__memorygrowview__.buffer.byteLength<1&&this.updateMemoryViews(),this.logMemory()}consolelog(e,t){console.log(this.toString(e,t))}async loadFromArrayBuffer(e,t=null){this.wasmCode=e,await WebAssembly.instantiate(e,{wasi_snapshot_preview1:this.wasi,env:this.__exportsToWasm__}).then(r=>{this.wasmInstance=r.instance,this.wasmInstance.exports._initialize(),this.__functions__=this.wasmInstance.exports,this.linearMemory=this.wasmInstance.exports.memory.buffer,this.__memorygrowpointer__=this.__functions__.__malloc__(16),this.__memorygrowview__=new Uint8Array(this.linearMemory,this.__memorygrowpointer__,16),this.__functionsWithNamespace__={};let s=this.__functions__.__malloc__(1024),o=new Uint8Array(this.linearMemory,this.__functions__.__malloc__(1024),1024);for(let i in this.__functions__)if(i!="__demangle__"){let n=this.__functions__.__demangle__(this.toWASMString(i,o),s);if(n>0){let a=this.toString(s,n),_=a.indexOf("(");_>0&&(a=a.substring(0,_));let l=a.lastIndexOf("::");l>0&&(l=a.lastIndexOf("::",l-1),l>0&&(a=a.substr(l+2)));let c=a.split("::",2);c.length==2&&(this.__functionsWithNamespace__[c[0]]||(this.__functionsWithNamespace__[c[0]]={}),this.__functionsWithNamespace__[c[0]][c[1]]=this.__functions__[i]),this[a]=this.__functions__[i]}else this[i]=this.__functions__[i]}this.free(s),this.free(o.byteOffset),this.__functions__.__initialize__(),delete this.__functionsWithNamespace__,this.logMemory(),this.__classUnderConstruction__=null,t!=null&&t.afterWASMLoaded()})}toString(e,t=0){let r=null;if(t<1){let l=this.linearMemory.byteLength-e;for(l>16384&&(l=16384),r=new Uint8Array(this.linearMemory,e,l),t=0;t<l&&r[t]!=0;t++);}else r=new Uint8Array(this.linearMemory,e,t);let s="",o=0,i,n,a,_;for(;o<t;){if(i=r[o],n=a=0,i<=127?(n=0,a=i&255):i<=223?(n=1,a=i&31):i<=239?(n=2,a=i&15):i<=244&&(n=3,a=i&7),t-o-n>0)for(_=0;_<n;)i=r[o+_+1],a=a<<6|i&63,_+=1;else a=65533,n=t-o;s+=String.fromCodePoint(a),o+=n+1}return s}toWASMString(e,t=null){let r=e.length,s=0,o,i,n,a=0,_=r*4+1;for(t==null&&(t=new Uint8Array(this.linearMemory,this.malloc(_),_));s<r;){for(o=e.codePointAt(s),i=n=0,o<=127?(i=0,n=0):o<=2047?(i=6,n=192):o<=65535?(i=12,n=224):o<=2097151&&(i=18,n=240),t[a++]=n|o>>i,i-=6;i>=0;)t[a++]=128|o>>i&63,i-=6;s+=o>=65536?2:1}return t[a]=0,t.byteOffset}logMemory(){console.log("WASM memory "+this.id+": "+this.niceSize(this.__functions__.__stacksize__())+" stack, "+this.niceSize(this.linearMemory.byteLength-this.__functions__.__heapbase__())+" heap, "+this.niceSize(this.linearMemory.byteLength)+" total.")}malloc(e){let t=this.__functions__.__malloc__(e);return this.__memorygrowview__.buffer.byteLength<1&&this.updateMemoryViews(),t}updateMemoryViews(){for(let e of this.__views__)this.updateBuffer(e,this.linearMemory);this.__memorygrowview__=new Uint8Array(this.linearMemory,this.__memorygrowpointer__,16)}free(e){this.__functions__.__free__(e)}setInt64(e,t,r){this.__functions__.__setint64__(e,t,r)}bufferToWASM(e,t){let r=null,s=null;typeof t.getChannelData=="function"?(r=t.getChannelData(0),s=t.getChannelData(1)):(r=t[0][0],s=t[0][1]);for(let o=0,i=0;o<e.array.length;o++,i++)e.array[o++]=r[i],e.array[o]=s[i]}bufferToJS(e,t){let r=null,s=null;typeof t.getChannelData=="function"?(r=t.getChannelData(0),s=t.getChannelData(1)):(r=t[0][0],s=t[0][1]);for(let o=0,i=0;o<e.array.length;o++,i++)r[i]=e.array[o++],s[i]=e.array[o]}arrayBufferToWASM(e,t=0){let r=this.malloc(e.byteLength+t);return new Uint8Array(this.linearMemory).set(new Uint8Array(e,0,e.byteLength),r+t),r}copyWASMToArrayBuffer(e,t){let r=new ArrayBuffer(t);return new Uint8Array(r,0,t).set(new Uint8Array(this.linearMemory,e,t)),r}moveWASMToArrayBuffer(e,t){let r=this.copyWASMToArrayBuffer(e,t);return this.free(e),r}}typeof exports=="object"&&typeof module=="object"?module.exports=SuperpoweredGlue:typeof define=="function"&&define.amd?define([],function(){return SuperpoweredGlue}):typeof exports=="object"&&(exports.SuperpoweredGlue=SuperpoweredGlue);class SuperpoweredTrackLoader{constructor(t){this.receiver=typeof t.port<"u"?t.port:t,typeof t.terminate<"u"&&t.addEventListener("message",this.onmessage)}onmessage(t){return typeof t.data.SuperpoweredLoad!="string"?!1:(this.load(t.data.SuperpoweredLoad),!0)}load(t){let r=new Worker("/static/superpowered/SuperpoweredTrackLoaderWorker.js");r.__url__=t,r.ontransfer=(function(s){this.transfer(s.transfer,r)}).bind(this),r.onmessage=(function(s){this.transfer(s.data.__transfer__,r)}).bind(this),r.postMessage({load:r.__url__})}transfer(t,r){typeof this.receiver.postMessage=="function"?this.receiver.postMessage({SuperpoweredLoaded:{buffer:t,url:r.__url__}},[t]):this.receiver({SuperpoweredLoaded:{buffer:t,url:r.__url__}}),r.terminate()}static downloadAndDecode(t,r){typeof r.onMessageFromMainScope=="function"&&typeof r.sendMessageToMainScope=="function"?r.sendMessageToMainScope({SuperpoweredLoad:t}):new SuperpoweredTrackLoader(r).load(t)}}typeof exports=="object"&&typeof module=="object"?module.exports={SuperpoweredTrackLoader}:typeof define=="function"&&define.amd?define([],function(){return{SuperpoweredTrackLoader}}):typeof exports=="object"&&(exports.SuperpoweredTrackLoader={SuperpoweredTrackLoader});var AudioWorkletHasBrokenModuleImplementation=!1;class SuperpoweredWebAudio{constructor(t,r){AudioWorkletHasBrokenModuleImplementation=navigator.userAgent.indexOf("AppleWebKit")>-1||navigator.userAgent.indexOf("Firefox")>-1,AudioWorkletHasBrokenModuleImplementation&&navigator.userAgent.indexOf("Chrome")>-1&&(AudioWorkletHasBrokenModuleImplementation=!1),this.Superpowered=r,this.audioContext=null;let s=window.AudioContext||window.webkitAudioContext||!1,o=new s;o.sampleRate<t&&(o.close(),o=new s({sampleRate:t})),this.audioContext=o}getUserMediaForAudio(t,r,s){let o={};if(navigator.mediaDevices){let i=navigator.mediaDevices.getSupportedConstraints();for(let n in i)i.hasOwnProperty(n)&&t[n]!==void 0&&(o[n]=t[n])}if(o.audio=!0,o.video=!1,navigator.fastAndTransparentAudio=t.hasOwnProperty("fastAndTransparentAudio")&&t.fastAndTransparentAudio===!0,navigator.fastAndTransparentAudio&&(o.echoCancellation=!1,o.disableLocalEcho=!1,o.autoGainControl=!1,o.audio={mandatory:{googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googNoiseSuppression:!1,googHighpassFilter:!1,googEchoCancellation2:!1,googNoiseSuppression2:!1,googDAEchoCancellation:!1,googNoiseReduction:!1}}),navigator.getUserMediaMethod=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mediaDevices.mozGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMediaMethod)navigator.getUserMediaMethod(o,r,s);else{let i=null,n=!1;try{i=navigator.mediaDevices.getUserMedia}catch(a){location.protocol.toLowerCase()!="https"&&location.hostname.toLowerCase()!="localhost"?s("Web Audio requires a secure context (HTTPS or localhost)."):s(a),n=!0}n||(i?navigator.mediaDevices.getUserMedia(o).then(r).catch(s):s("Can't access getUserMedia."))}}async getUserMediaForAudioAsync(t){return new Promise((r,s)=>{this.getUserMediaForAudio(t,function(o){if(navigator.fastAndTransparentAudio){let i=o.getAudioTracks();for(let n of i)n.applyConstraints({autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1})}r(o)},s)})}async createAudioNodeAsync(t,r,s){return new Promise((o,i)=>{this.createAudioNode(t,r,o,s)})}createAudioNode(t,r,s,o){!AudioWorkletHasBrokenModuleImplementation&&typeof AudioWorkletNode=="function"?this.audioContext.audioWorklet.addModule(t).then(()=>{class i extends AudioWorkletNode{constructor(_,l){super(_.audioContext,l,{processorOptions:{wasmCode:_.Superpowered.wasmCode,samplerate:_.audioContext.sampleRate,maxChannels:_.Superpowered.__maxChannels__},outputChannelCount:[2]})}sendMessageToAudioScope(_,l=[]){this.port.postMessage(_,l)}destruct(){this.port.postMessage("___superpowered___destruct___")}}let n=new i(this,r);n.loader=new SuperpoweredTrackLoader(n),n.onReadyCallback=s,n.onMessageFromAudioScope=o,n.port.onmessage=(function(a){n.loader.onmessage(a)||(a.data=="___superpowered___onready___"?n.onReadyCallback(n):n.onMessageFromAudioScope(a.data))}).bind(n)}):import(t).then(i=>{let n=this.audioContext.createScriptProcessor(1024,2,2);n.samplerate=this.audioContext.sampleRate,n.inputBuffer=this.Superpowered.createFloatArray(1024*2),n.outputBuffer=this.Superpowered.createFloatArray(1024*2),n.processor=new i.default(this.Superpowered,o,n.samplerate),n.sendMessageToAudioScope=function(a,_=0){n.processor.onMessageFromMainScope(a)},n.destruct=function(){n.processor.onDestruct()},n.onaudioprocess=function(a){n.processor.Superpowered.bufferToWASM(n.inputBuffer,a.inputBuffer),n.processor.processAudio(n.inputBuffer,n.outputBuffer,n.inputBuffer.array.length/2),n.processor.Superpowered.bufferToJS(n.outputBuffer,a.outputBuffer)},s(n)})}}if(!AudioWorkletHasBrokenModuleImplementation&&typeof AudioWorkletProcessor=="function"){class e extends AudioWorkletProcessor{constructor(r){super(),SuperpoweredGlue.__uint_max__sp__=r.processorOptions.maxChannels,this.state=0,this.port.onmessage=s=>{s.data=="___superpowered___destruct___"?(this.state=-1,this.onDestruct()):this.onMessageFromMainScope(s.data)},this.samplerate=r.processorOptions.samplerate,this.Superpowered=new SuperpoweredGlue,this.Superpowered.loadFromArrayBuffer(r.processorOptions.wasmCode,this)}afterWASMLoaded(){this.Superpowered.Initialize(),this.inputBuffer=this.Superpowered.createFloatArray(128*2),this.outputBuffer=this.Superpowered.createFloatArray(128*2),this.onReady(),this.port.postMessage("___superpowered___onready___"),this.state=1}onReady(){}onDestruct(){}onMessageFromMainScope(r){}sendMessageToMainScope(r){this.port.postMessage(r)}processAudio(r,s){}process(r,s,o){return this.state<0?!1:(this.state==1&&(r[0].length>1&&this.Superpowered.bufferToWASM(this.inputBuffer,r),this.processAudio(this.inputBuffer,this.outputBuffer,this.inputBuffer.array.length/2,o),s[0].length>1&&this.Superpowered.bufferToJS(this.outputBuffer,s)),!0)}}SuperpoweredWebAudio.AudioWorkletProcessor=e}else{class e{constructor(r,s,o){u(this,"onMessageFromAudioScope",null);this.loader=new SuperpoweredTrackLoader(this),this.Superpowered=r,this.samplerate=o,this.onMessageFromAudioScope=s,this.onReady()}onReady(){}onDestruct(){}onMessageFromMainScope(r){}sendMessageToMainScope(r){this.loader.onmessage({data:r})||this.onMessageFromAudioScope(r)}postMessage(r,s=[]){this.onMessageFromMainScope(r)}processAudio(r,s){}}SuperpoweredWebAudio.AudioWorkletProcessor=e}typeof exports=="object"&&typeof module=="object"?module.exports={SuperpoweredGlue,SuperpoweredWebAudio,SuperpoweredTrackLoader}:typeof define=="function"&&define.amd?define([],function(){return{SuperpoweredGlue,SuperpoweredWebAudio,SuperpoweredTrackLoader}}):typeof exports=="object"&&(exports.SuperpoweredModule={SuperpoweredGlue,SuperpoweredWebAudio,SuperpoweredTrackLoader});const minimumSampleRate=44100;let processorNode;document.querySelector("#loadAssetButton").addEventListener("click",async()=>{const e=await SuperpoweredGlue$1.Instantiate("ExampleLicenseKey-WillExpire-OnNextUpdate"),t=new SuperpoweredWebAudio$1(minimumSampleRate,e);processorNode=await t.createAudioNodeAsync("playerProcessor.js","PlayerProcessor",onMessageProcessorAudioScope),processorNode.onprocessorerror=o=>{console.error(o)},t.audioContext.suspend(),processorNode.connect(t.audioContext.destination),t.audioContext.resume();const s=processorNode.sendMessageToAudioScope.bind(processorNode);console.log(e.downloadAndDecode),console.log(SuperpoweredTrackLoader.downloadAndDecode),e.downloadAndDecode("song.mp3",s)});function onMessageProcessorAudioScope(e){e.event==="ready"&&console.log("✅ Processor ready."),e.event==="assetLoaded"&&(console.log("✅ Track loaded and playing!"),document.querySelector("#loadAssetButton").style.display="none",document.querySelector("#playerVolumeSlider").disabled=!1,document.querySelector("#playerSpeedSlider").disabled=!1,document.querySelector("#playerPitchSlider").disabled=!1,document.querySelector("#trackLoadStatus").style.display="none")}function onParamChange(e,t){processorNode.sendMessageToAudioScope({type:"parameterChange",payload:{id:e,value:t}})}window.onParamChange=onParamChange});export default g();
